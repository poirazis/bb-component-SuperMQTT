{
  "type": "component",
  "metadata": {},
  "schema": {
    "name": "bb-component-SuperMQTT",
    "friendlyName": "Super MQTT",
    "description": "An MQTT client component for Budibase",
    "icon": "EmailOutline",
    "context": {
      "type": "static",
      "scope": "global",
      "values": [
        { "key": "connected", "label": "Connected", "type": "boolean" },
        { "key": "status", "label": "Status", "type": "string" },
        { "key": "lastMessage", "label": "Last Message" },
        { "key": "at", "label": "Last Message At" }
      ]
    },
    "settings": [
      {
        "type": "text",
        "key": "host",
        "label": "Host",
        "defaultValue": "localhost"
      },
      {
        "type": "text",
        "key": "port",
        "label": "Port",
        "defaultValue": "8083",
        "required": true
      },
      {
        "type": "text",
        "key": "clientId",
        "label": "Client ID",
        "placeholder": "Auto"
      },
      {
        "type": "text",
        "key": "username",
        "label": "Username"
      },
      {
        "type": "text",
        "key": "password",
        "label": "Password"
      },
      {
        "type": "text",
        "key": "topic",
        "label": "Topic",
        "defaultValue": "test",
        "required": true
      },
      {
        "type": "number",
        "key": "keepAlive",
        "label": "Keep Alive",
        "defaultValue": 60,
        "min": 0
      },
      {
        "type": "number",
        "key": "maxReconnect",
        "label": "Max Reconnect",
        "defaultValue": 10,
        "min": 0
      },
      {
        "type": "boolean",
        "key": "jsonMessage",
        "label": "JSON Message"
      },
      {
        "type": "boolean",
        "key": "showTest",
        "label": "Show Test Panel",
        "defaultValue": false
      },
      {
        "type": "boolean",
        "key": "showStatus",
        "label": "Show Status",
        "defaultValue": true
      },
      {
        "section": true,
        "name": "events",
        "settings": [
          {
            "type": "event",
            "key": "onConnect",
            "label": "On Connect"
          },
          {
            "type": "event",
            "key": "onDisconnect",
            "label": "On Disconnect"
          },
          {
            "type": "event",
            "key": "onMessage",
            "label": "On Message",
            "context": [
              {
                "key": "message",
                "label": "message"
              }
            ]
          }
        ]
      }
    ]
  }
}
